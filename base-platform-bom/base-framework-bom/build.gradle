def artifactId = "base-framework-bom"
version = '0.0.6-SNAPSHOT'

def versions = [
        baseProcessor           : '0.0.1-SNAPSHOT',
        baseCommonUtils         : '1.1.3-SNAPSHOT',
        baseCommonMiddleware    : '1.1.3-SNAPSHOT',
        baseCommonDayu          : '1.1.3-SNAPSHOT',
        baseCommonCache         : '1.1.3-SNAPSHOT',
        baseDubboFramework      : '1.0.9-SNAPSHOT',
        baseSpringBootStarter   : '1.5.x.68-SNAPSHOT',
        baseSpringCloudFramework: '1.5.x.56-SNAPSHOT'
]

dependencyManagement {
    imports {
        mavenBom "cn.ly:base-platform-bom:${rootProject.version}"
    }
    dependencies {
        dependency "cn.ly:ly-async-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-base-mybatis-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-cache-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-dayu-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-endpoint-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-framework-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-fastjson-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-health-check-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-graceful-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-logger-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-mail-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-activemq-spring-boot-starter:1.5.x.58-test003-SNAPSHOT"
        dependency "cn.ly:ly-metric-druid-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-hikari-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-httpclient-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-redis-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-retrofit-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-metric-undertow-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-mongo-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-mq-lock-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-mq-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-mybatis-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-multi-shardingsphere-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-multi-mybatis-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-quartz-lock-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-quartz-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-redis-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-rest-template-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-retrofit-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-swagger-spring-boot-starter:${versions.baseSpringBootStarter}"
        dependency "cn.ly:ly-thread-pool-spring-boot-starter:${versions.baseSpringBootStarter}"

        dependency "cn.ly:base-dubbo-framework:${versions.baseDubboFramework}"

        dependency "cn.ly:base-spring-cloud-framework:${versions.baseSpringCloudFramework}"

        dependency "cn.ly:base-common-dayu:${versions.baseCommonDayu}"

        dependency "cn.ly:base-common-cache:${versions.baseCommonCache}"

        dependency "cn.ly:base-common-middleware:${versions.baseCommonMiddleware}"

        dependency "cn.ly:base-common-utils:${versions.baseCommonUtils}"

        dependency "cn.ly:base-processor:${versions.baseProcessor}"
    }
    resolutionStrategy {
        cacheChangingModulesFor 0, 'seconds'
        cacheDynamicVersionsFor 0, 'seconds'
    }
}

ext {
    nexusUrl = version.endsWith("-SNAPSHOT") ?
            "http://127.0.0.1:8089/repository/fly-snapshots/" :
            "http://127.0.0.1:8089/repository/fly-releases/"
}

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: nexusUrl) {
                authentication(userName: "fly", password: "fly123")
            }
            pom.version = "$project.version"
            pom.artifactId = "$artifactId"
            pom.groupId = "$project.group"
        }
    }
}